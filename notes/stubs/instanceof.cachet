import "../cacheir.cachet"

ir CacheStub emits CacheIR {
    op InstanceOf(lhsId: ValueId, rhsId: ValueId) {
        CacheIR::initValueInput(lhsId);
        CacheIR::defineValueReg(lhsId);
        CacheIR::initValueInput(rhsId);
        CacheIR::defineValueReg(rhsId);

        emit CacheIR::GuardToObject(rhsId);
        let protoId = ValueId::toObjectId(rhsId);
        emit CacheIR::LoadInstanceOfObjectResult(lhsId, protoId);
    }
}
